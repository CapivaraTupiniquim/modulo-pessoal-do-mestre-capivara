{"name":"Wrath of the Storm","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_8w3g4ib3wb2","path":"Hey_Loi","color":"#9a4619"}},"scope":"global","command":"game.dnd5e.rollItemMacro(\"Wrath of the Storm\");","author":"5zPqQnLJNovPTewo","img":"modules/plutonium/media/icon/mighty-force.svg","actorIds":[],"_id":"1pPaUxZReEIqlVjY"}
{"name":"New Macro","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"cf":{"id":"temp_4dqhvmirpc3","path":"AkiraSa","color":"#26f7e9"}},"scope":"global","command":"let torch = async function() {\n\n   const tokens = canvas.tokens.controlled;\n\n   for (const token of tokens){\n       if (token.data.brightLight != 0) {\n           await token.update({\"dimLight\": 0, \"brightLight\": 0, \"lightColor\": \"\",}); \n       } else {\n         await token.update({\"dimLight\": 12, \"brightLight\": 6, \"lightAlpha\" : 0.2,  \"lightColor\": \"#332d00\", lightAnimation: {speed : 1, intensity : 4, type : \"torch\"}});\n       }\n   }\n};\ntorch();","author":"5zPqQnLJNovPTewo","img":"https://i.imgur.com/7wD5AcT.jpg","actorIds":[],"_id":"2CMZmx9MxjQ6Sm9W"}
{"_id":"5FpBO85Bj4lNgcg3","name":"#[CF_tempEntity]","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"chat","flags":{"cf":{"id":"temp_4dqhvmirpc3","path":"AkiraSa","color":"#26f7e9","name":"AkiraSa","children":["naqL1BclBPomyus2","sFB4ddmh0JW95B5Z","2CMZmx9MxjQ6Sm9W","kg36tC2bgEXVqKBh","RTbibAYJq75X1r0J","Y2xZeMjDA3miAllC","UZOcylosca8kYpHZ"],"folderPath":[]}},"scope":"global","command":"","author":"5zPqQnLJNovPTewo","img":"icons/svg/dice-target.svg","actorIds":[]}
{"name":"#[CF_tempEntity]","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"chat","flags":{"cf":{"id":"temp_8w3g4ib3wb2","path":"Hey_Loi","color":"#9a4619","name":"Hey_Loi","children":["vu0LV4cgorTfZY7N","SWUQxP7zx2ABwcNE","SWUQxP7zx2ABwcNE","uxsYN83uq6Axn3om","IGqLvneSNhrStrpm","uq4X11HQ3l7JfeGW","yyjYfjajgoiRyqAr","hAkYnu7BwDA8OsE5","fikqucAg2BRqtblX","p6xUeP0RjFZNMsoV","YUw2GeFD3z4vuWhJ","SzjjZwRpUbKTEQ6x","hmSXUkePofCpC251","m8SIPZFQ5qbwOHoO","OmOokcgxlO8DVHb3","6uvbf1EzGwNEqAFS","E6qBqciGZhhDN5iL","FnTcuTelMsJRzjoq","cTtYR6Z8du8bVkRD","cTtYR6Z8du8bVkRD","AnMYH30awCL7UxDY","1pPaUxZReEIqlVjY"],"folderPath":[]}},"scope":"global","command":"","author":"5zPqQnLJNovPTewo","img":"icons/svg/dice-target.svg","actorIds":[],"_id":"5de2VGWfZ4xA86t3"}
{"name":"Shatter","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_8w3g4ib3wb2","path":"Hey_Loi","color":"#9a4619"}},"scope":"global","command":"game.dnd5e.rollItemMacro(\"Shatter\");","author":"5zPqQnLJNovPTewo","img":"systems/dnd5e/icons/spells/explosion-sky-2.jpg","actorIds":[],"_id":"6uvbf1EzGwNEqAFS"}
{"_id":"7KpEuS1pbjXzwOOC","name":"Healing Word","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_e8rcia208ct","path":"Ayron","color":"#661cb0"}},"scope":"global","command":"game.dnd5e.rollItemMacro(\"Healing Word\");","author":"TnNzIo9iwA99Q6nA","img":"systems/dnd5e/icons/spells/heal-jade-1.jpg","actorIds":[]}
{"name":"Rapier","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_e8rcia208ct","path":"Ayron","color":"#661cb0"}},"scope":"global","command":"game.dnd5e.rollItemMacro(\"Rapier\");","author":"5zPqQnLJNovPTewo","img":"systems/dnd5e/icons/items/weapons/sword-short.jpg","actorIds":[],"_id":"9mXgcXmcrvB3qFaj"}
{"name":"Chronal Shift","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_g80098x5c3","path":"Hallowed","color":"#48e70d"}},"scope":"global","command":"game.dnd5e.rollItemMacro(\"Chronal Shift\");","author":"5zPqQnLJNovPTewo","img":"modules/plutonium/media/icon/mighty-force.svg","actorIds":[],"_id":"APHFdgL7ACdCv4RH"}
{"name":"Thunderwave","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_8w3g4ib3wb2","path":"Hey_Loi","color":"#9a4619"}},"scope":"global","command":"game.dnd5e.rollItemMacro(\"Thunderwave\");","author":"5zPqQnLJNovPTewo","img":"modules/plutonium/media/icon/spell/phb-thunderwave.jpg","actorIds":[],"_id":"AnMYH30awCL7UxDY"}
{"name":"Prestidigitation","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_e8rcia208ct","path":"Ayron","color":"#661cb0"}},"scope":"global","command":"game.dnd5e.rollItemMacro(\"Prestidigitation\");","author":"5zPqQnLJNovPTewo","img":"systems/dnd5e/icons/spells/explosion-royal-1.jpg","actorIds":[],"_id":"D1GUYr7q7SU0BfcX"}
{"name":"Shield of Faith","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_8w3g4ib3wb2","path":"Hey_Loi","color":"#9a4619"}},"scope":"global","command":"game.dnd5e.rollItemMacro(\"Shield of Faith\");","author":"5zPqQnLJNovPTewo","img":"systems/dnd5e/icons/spells/protect-sky-2.jpg","actorIds":[],"_id":"E6qBqciGZhhDN5iL"}
{"name":"Rapier","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_e8rcia208ct","path":"Ayron","color":"#661cb0"}},"scope":"global","command":"game.dnd5e.rollItemMacro(\"Rapier\");","author":"5zPqQnLJNovPTewo","img":"systems/dnd5e/icons/items/weapons/sword-short.jpg","actorIds":[],"_id":"E8AOQlNJGhiYqFrC"}
{"name":"Spear","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_8w3g4ib3wb2","path":"Hey_Loi","color":"#9a4619"}},"scope":"global","command":"game.dnd5e.rollItemMacro(\"Spear\");","author":"5zPqQnLJNovPTewo","img":"systems/dnd5e/icons/items/weapons/spear.jpg","actorIds":[],"_id":"FnTcuTelMsJRzjoq"}
{"name":"Cure Wounds","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_8w3g4ib3wb2","path":"Hey_Loi","color":"#9a4619"}},"scope":"global","command":"game.dnd5e.rollItemMacro(\"Cure Wounds\");","author":"5zPqQnLJNovPTewo","img":"modules/plutonium/media/icon/spell/phb-cure-wounds.jpg","actorIds":[],"_id":"IGqLvneSNhrStrpm"}
{"name":"Dissonant Whispers","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_e8rcia208ct","path":"Ayron","color":"#661cb0"}},"scope":"global","command":"game.dnd5e.rollItemMacro(\"Dissonant Whispers\");","author":"5zPqQnLJNovPTewo","img":"modules/plutonium/media/icon/spell/phb-dissonant-whispers.jpg","actorIds":[],"_id":"MuvHMR1itxkfu45i"}
{"_id":"OKLit2SPVPXLiDb9","name":"#[CF_tempEntity]","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"chat","flags":{"cf":{"id":"temp_e8rcia208ct","path":"Ayron","color":"#661cb0","name":"Ayron","children":["MuvHMR1itxkfu45i","7KpEuS1pbjXzwOOC","ilSOqxx6fwQdFIOy","D1GUYr7q7SU0BfcX","E8AOQlNJGhiYqFrC","9mXgcXmcrvB3qFaj","iUqWHGPb4tXz60VD","xVEhpPqPfciPrQAe","YEUhfK7W17A8WOOr"],"folderPath":[]}},"scope":"global","command":"","author":"5zPqQnLJNovPTewo","img":"icons/svg/dice-target.svg","actorIds":[]}
{"name":"Shatter","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_8w3g4ib3wb2","path":"Hey_Loi","color":"#9a4619"}},"scope":"global","command":"game.dnd5e.rollItemMacro(\"Shatter\");","author":"5zPqQnLJNovPTewo","img":"modules/plutonium/media/icon/spell/phb-shatter.jpg","actorIds":[],"_id":"OmOokcgxlO8DVHb3"}
{"name":"Ray of Frost","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_4dqhvmirpc3","path":"AkiraSa","color":"#26f7e9"}},"scope":"global","command":"game.dnd5e.rollItemMacro(\"Ray of Frost\");","author":"5zPqQnLJNovPTewo","img":"systems/dnd5e/icons/spells/beam-blue-1.jpg","actorIds":[],"_id":"RTbibAYJq75X1r0J"}
{"_id":"SWUQxP7zx2ABwcNE","name":"Bless","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_8w3g4ib3wb2","path":"Hey_Loi","color":"#9a4619"}},"scope":"global","command":"game.dnd5e.rollItemMacro(\"Bless\");","author":"JXS8txx5XY59nU71","img":"modules/plutonium/media/icon/spell/phb-bless.jpg","actorIds":[]}
{"name":"Metallic Breath Weapon","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_8w3g4ib3wb2","path":"Hey_Loi","color":"#9a4619"}},"scope":"global","command":"game.dnd5e.rollItemMacro(\"Metallic Breath Weapon\");","author":"5zPqQnLJNovPTewo","img":"icons/svg/mystery-man.svg","actorIds":[],"_id":"SzjjZwRpUbKTEQ6x"}
{"name":"Toll the Dead","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_4dqhvmirpc3","path":"AkiraSa","color":"#26f7e9"}},"scope":"global","command":"game.dnd5e.rollItemMacro(\"Toll the Dead\");","author":"5zPqQnLJNovPTewo","img":"modules/plutonium/media/icon/spell/xge-toll-the-dead.jpg","actorIds":[],"_id":"UZOcylosca8kYpHZ"}
{"name":"Shield","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_4dqhvmirpc3","path":"AkiraSa","color":"#26f7e9"}},"scope":"global","command":"game.dnd5e.rollItemMacro(\"Shield\");","author":"5zPqQnLJNovPTewo","img":"systems/dnd5e/icons/spells/protect-magenta-1.jpg","actorIds":[],"_id":"Y2xZeMjDA3miAllC"}
{"name":"Vicious Mockery","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_e8rcia208ct","path":"Ayron","color":"#661cb0"}},"scope":"global","command":"game.dnd5e.rollItemMacro(\"Vicious Mockery\");","author":"5zPqQnLJNovPTewo","img":"modules/plutonium/media/icon/spell/phb-vicious-mockery.jpg","actorIds":[],"_id":"YEUhfK7W17A8WOOr"}
{"name":"Hold Person","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_8w3g4ib3wb2","path":"Hey_Loi","color":"#9a4619"}},"scope":"global","command":"game.dnd5e.rollItemMacro(\"Hold Person\");","author":"5zPqQnLJNovPTewo","img":"modules/plutonium/media/icon/spell/phb-hold-person.jpg","actorIds":[],"_id":"YUw2GeFD3z4vuWhJ"}
{"_id":"cTtYR6Z8du8bVkRD","name":"Spiritual Weapon","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_8w3g4ib3wb2","path":"Hey_Loi","color":"#9a4619"}},"scope":"global","command":"game.dnd5e.rollItemMacro(\"Spiritual Weapon\");","author":"JXS8txx5XY59nU71","img":"modules/plutonium/media/icon/spell/phb-spiritual-weapon.jpg","actorIds":[]}
{"name":"Guiding Bolt","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_8w3g4ib3wb2","path":"Hey_Loi","color":"#9a4619"}},"scope":"global","command":"game.dnd5e.rollItemMacro(\"Guiding Bolt\");","author":"5zPqQnLJNovPTewo","img":"modules/plutonium/media/icon/spell/phb-guiding-bolt.jpg","actorIds":[],"_id":"fikqucAg2BRqtblX"}
{"name":"#[CF_tempEntity]","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"chat","flags":{"cf":{"id":"temp_g80098x5c3","path":"Hallowed","color":"#48e70d","name":"Hallowed","children":["APHFdgL7ACdCv4RH"],"folderPath":[]}},"scope":"global","command":"","author":"5zPqQnLJNovPTewo","img":"icons/svg/dice-target.svg","actorIds":[],"_id":"glSC9qiJfCSiMGuw"}
{"name":"Guiding Bolt","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_8w3g4ib3wb2","path":"Hey_Loi","color":"#9a4619"}},"scope":"global","command":"game.dnd5e.rollItemMacro(\"Guiding Bolt\");","author":"5zPqQnLJNovPTewo","img":"systems/dnd5e/icons/spells/fireball-sky-2.jpg","actorIds":[],"_id":"hAkYnu7BwDA8OsE5"}
{"name":"Sacred Flame","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_8w3g4ib3wb2","path":"Hey_Loi","color":"#9a4619"}},"scope":"global","command":"game.dnd5e.rollItemMacro(\"Sacred Flame\");","author":"5zPqQnLJNovPTewo","img":"modules/plutonium/media/icon/spell/phb-sacred-flame.jpg","actorIds":[],"_id":"hmSXUkePofCpC251"}
{"name":"Suggestion","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_e8rcia208ct","path":"Ayron","color":"#661cb0"}},"scope":"global","command":"game.dnd5e.rollItemMacro(\"Suggestion\");","author":"5zPqQnLJNovPTewo","img":"systems/dnd5e/icons/spells/air-burst-magenta-2.jpg","actorIds":[],"_id":"iUqWHGPb4tXz60VD"}
{"name":"Heat Metal","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_e8rcia208ct","path":"Ayron","color":"#661cb0"}},"scope":"global","command":"game.dnd5e.rollItemMacro(\"Heat Metal\");","author":"5zPqQnLJNovPTewo","img":"systems/dnd5e/icons/spells/light-air-fire-3.jpg","actorIds":[],"_id":"ilSOqxx6fwQdFIOy"}
{"name":"Radiant Soul","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_4dqhvmirpc3","path":"AkiraSa","color":"#26f7e9"}},"scope":"global","command":"game.dnd5e.rollItemMacro(\"Radiant Soul\");","author":"5zPqQnLJNovPTewo","img":"modules/plutonium/media/icon/family-tree.svg","actorIds":[],"_id":"kg36tC2bgEXVqKBh"}
{"name":"Sacred Flame","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_8w3g4ib3wb2","path":"Hey_Loi","color":"#9a4619"}},"scope":"global","command":"game.dnd5e.rollItemMacro(\"Sacred Flame\");","author":"5zPqQnLJNovPTewo","img":"modules/plutonium/media/icon/spell/phb-sacred-flame.jpg","actorIds":[],"_id":"m8SIPZFQ5qbwOHoO"}
{"name":"Metamagic: Heightened Spell","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_4dqhvmirpc3","path":"AkiraSa","color":"#26f7e9"}},"scope":"global","command":"game.dnd5e.rollItemMacro(\"Metamagic: Heightened Spell\");","author":"5zPqQnLJNovPTewo","img":"systems/dnd5e/icons/skills/fire_11.jpg","actorIds":[],"_id":"naqL1BclBPomyus2"}
{"name":"Harnes Divine Power","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_8w3g4ib3wb2","path":"Hey_Loi","color":"#9a4619"}},"scope":"global","command":"game.dnd5e.rollItemMacro(\"Harnes Divine Power\");","author":"5zPqQnLJNovPTewo","img":"icons/svg/mystery-man.svg","actorIds":[],"_id":"p6xUeP0RjFZNMsoV"}
{"name":"Metamagic: Twinned Spell","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_4dqhvmirpc3","path":"AkiraSa","color":"#26f7e9"}},"scope":"global","command":"game.dnd5e.rollItemMacro(\"Metamagic: Twinned Spell\");","author":"5zPqQnLJNovPTewo","img":"systems/dnd5e/icons/skills/blue_21.jpg","actorIds":[],"_id":"sFB4ddmh0JW95B5Z"}
{"name":"Destructive Wrath","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_8w3g4ib3wb2","path":"Hey_Loi","color":"#9a4619"}},"scope":"global","command":"game.dnd5e.rollItemMacro(\"Destructive Wrath\");","author":"5zPqQnLJNovPTewo","img":"icons/svg/mystery-man.svg","actorIds":[],"_id":"uq4X11HQ3l7JfeGW"}
{"name":"Breath Weapon","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_8w3g4ib3wb2","path":"Hey_Loi","color":"#9a4619"}},"scope":"global","command":"game.dnd5e.rollItemMacro(\"Breath Weapon\");","author":"5zPqQnLJNovPTewo","img":"systems/dnd5e/icons/skills/affliction_14.jpg","actorIds":[],"_id":"uxsYN83uq6Axn3om"}
{"_id":"vu0LV4cgorTfZY7N","name":"Bardic Inspiration","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_8w3g4ib3wb2","path":"Hey_Loi","color":"#9a4619"}},"scope":"global","command":"game.dnd5e.rollItemMacro(\"Bardic Inspiration\");","author":"JXS8txx5XY59nU71","img":"systems/dnd5e/icons/skills/yellow_08.jpg","actorIds":[]}
{"name":"Vicious Mockery","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_e8rcia208ct","path":"Ayron","color":"#661cb0"}},"scope":"global","command":"game.dnd5e.rollItemMacro(\"Vicious Mockery\");","author":"5zPqQnLJNovPTewo","img":"systems/dnd5e/icons/skills/affliction_24.jpg","actorIds":[],"_id":"xVEhpPqPfciPrQAe"}
{"_id":"yyjYfjajgoiRyqAr","name":"Guidance","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_8w3g4ib3wb2","path":"Hey_Loi","color":"#9a4619"}},"scope":"global","command":"game.dnd5e.rollItemMacro(\"Guidance\");","author":"JXS8txx5XY59nU71","img":"modules/plutonium/media/icon/spell/phb-guidance.jpg","actorIds":[]}
{"name":"Glaive","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_0fhhp4vc36mt","path":"Ivan","color":"#f718e4"}},"scope":"global","command":"game.dnd5e.rollItemMacro(\"Glaive\");","author":"5zPqQnLJNovPTewo","img":"systems/dnd5e/icons/items/weapons/glaive.png","actorIds":[],"_id":"i39VlwB3COIB8GpT"}
{"name":"Light Crossbow","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_0fhhp4vc36mt","path":"Ivan","color":"#f718e4"}},"scope":"global","command":"game.dnd5e.rollItemMacro(\"Light Crossbow\");","author":"5zPqQnLJNovPTewo","img":"systems/dnd5e/icons/items/weapons/crossbow-light.jpg","actorIds":[],"_id":"GmSoMsyMVZudFBkL"}
{"name":"Prisma Luminoso (p)","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_0fhhp4vc36mt","path":"Ivan","color":"#f718e4"}},"scope":"global","command":"game.dnd5e.rollItemMacro(\"Prisma Luminoso (p)\");","author":"5zPqQnLJNovPTewo","img":"moulinette/images/gameicons/crystal-growth-%231aa7ff-%23ffffff.svg","actorIds":[],"_id":"3WTKQ3XQwlFbMiPT"}
{"name":"Torch","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"cf":{"id":"temp_0fhhp4vc36mt","path":"Ivan","color":"#f718e4"}},"scope":"global","command":"game.dnd5e.rollItemMacro(\"Torch\");","author":"5zPqQnLJNovPTewo","img":"systems/dnd5e/icons/items/inventory/torch.jpg","actorIds":[],"_id":"Jghl85jx1TEZJsQ6"}
{"name":"#[CF_tempEntity]","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"chat","flags":{"cf":{"id":"temp_0fhhp4vc36mt","path":"Ivan","color":"#f718e4","name":"Ivan","children":["i39VlwB3COIB8GpT","GmSoMsyMVZudFBkL","3WTKQ3XQwlFbMiPT","Jghl85jx1TEZJsQ6"],"folderPath":[]}},"scope":"global","command":"","author":"5zPqQnLJNovPTewo","img":"icons/svg/dice-target.svg","actorIds":[],"_id":"6WwoI0ADy1vNzSCx"}
{"name":"Randomize Wildcard Tokens","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"core":{"sourceId":"Macro.BSlgjKB4i6nMVS9e"},"cf":{"id":"temp_juyy5ibvpm","path":"Mestre#/CF_SEP/Testes","color":"#fffaad"}},"scope":"global","command":"// To apply to only controlled tokens, change the first line to:\n// for(let nextToken of canvas.tokens.controlled) {\nasync function randomizeImages() {\nfor(let nextToken of canvas.tokens.placeables) {\n    if (nextToken.actor.data.token.randomImg) {\n        let tokenImgArray = await game.actors.get(nextToken.actor.id).getTokenImages();\n        let imageChoice = Math.floor(Math.random() * tokenImgArray.length);\n        let image = tokenImgArray[imageChoice]\n        nextToken.update({ \"img\": image })\n    }\n}\n}\nrandomizeImages()","author":"5zPqQnLJNovPTewo","img":"icons/svg/dice-target.svg","actorIds":[],"_id":"DmUfABEEd7IXx0BO"}
{"name":"som-pedra","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"furnace":{"runAsGM":false},"cf":{"id":"temp_juyy5ibvpm","path":"Mestre#/CF_SEP/Testes","color":"#fffaad"}},"scope":"global","command":"const som = 'https://audio.jukehost.co.uk/90qme51JkB1DqqrmQqvmHORq4A9hKB6k.ogg';\nAudioHelper.play({src: som, volume: 1.0, autoplay: true, loop: false}, true);","author":"5zPqQnLJNovPTewo","img":"icons/svg/dice-target.svg","actorIds":[],"_id":"Xk4DoPiUPaaFMb2M"}
{"name":"tamanho-","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"furnace":{"runAsGM":false},"cf":{"id":"temp_juyy5ibvpm","path":"Mestre#/CF_SEP/Testes","color":"#fffaad"}},"scope":"global","command":"let tokens = canvas.tokens.controlled\n\ntokens.forEach(t => {\n    t.update({\"width\": 1, \"height\": 1});\n\nconst som = 'sons/teste.mp3';\nAudioHelper.play({src: som, volume: 1.0, autoplay: true, loop: false}, true);\n\n});","author":"5zPqQnLJNovPTewo","img":"icons/svg/dice-target.svg","actorIds":[],"_id":"gGOUziVZEZgqjDs8"}
{"name":"tamanho+","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"furnace":{"runAsGM":false},"cf":{"id":"temp_juyy5ibvpm","path":"Mestre#/CF_SEP/Testes","color":"#fffaad"}},"scope":"global","command":"let tokens = canvas.tokens.controlled\n\ntokens.forEach(t => {\n    t.update({\"width\": 2, \"height\": 2});\n\nconst som = 'sons/teste.mp3';\nAudioHelper.play({src: som, volume: 1.0, autoplay: true, loop: false}, true);\n\n});","author":"5zPqQnLJNovPTewo","img":"icons/svg/dice-target.svg","actorIds":[],"_id":"Kf90jOgMDMReas9D"}
{"name":"Terra Devastada","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"furnace":{"runAsGM":false},"cf":{"id":"temp_juyy5ibvpm","path":"Mestre#/CF_SEP/Testes","color":"#fffaad"}},"scope":"global","command":"// OBRIGATÓRIO ATIVAR O MÓDULO DICE SO NICE\n\n// CONFIGURAÇÕES\nlet dice = 1; // coloque a quantidade de dados que deseja usar\nconst sorte = true; // true: ativa sorte || false: desativa a sorte\nconst secreto = false; // true: rolagem é secreta para o mestre || false: todos veem a rolagem\nconst chatImagem = 'https://raw.githubusercontent.com/brunocalado/mestre-digital/master/Foundry%20VTT/Macros/Sistemas%20Diversos/TerraDevastada.webp'; \nconst som = 'https://raw.githubusercontent.com/brunocalado/mestre-digital/master/Foundry%20VTT/Macros/Sistemas%20Diversos/Zombie_Eating.mp3'; // coloque false para não tocar nada\n\n// ---------------------------------------------------------------\n// NÃO MEXA COM O QUE ESTÁ ABAIXO\nconst macroVersion = 'v0.7';\n/* Terra Devastada\n## Features\n- dice so nice\n- onde em 1D6 contam os pares como sucessos e o número 6 do dado explode!\n\nsource: https://raw.githubusercontent.com/brunocalado/mestre-digital/master/Foundry%20VTT/Macros/Sistemas%20Diversos/TerraDevastada.js\nicon: https://raw.githubusercontent.com/brunocalado/mestre-digital/master/Foundry%20VTT/Macros/Sistemas%20Diversos/TerraDevastada.webp\n*/\n\n(async () => {  \n  let truedice = dice;\n  let sucessos=0;\n  let sucessossorte=0;\n  let roll3d;\n  let roll;\n  let message = '';\n  let explosoes=0;\n  let sortedice = 1;\n  let rolagens = [];\n  let rolagenssorte = [];\n  let chatData; \n  \n  for (var i = 0; i < truedice; i++) {\n    roll3d = new Roll('1d6').roll();    \n    game.dice3d.showForRoll(roll3d);      \n    roll = roll3d.total;\n    rolagens.push(roll);\n    \n    if(roll==2 || roll==4 || roll==6){\n      sucessos+=1;\n      if(roll==6){\n        truedice+=1;\n        explosoes+=1;\n      }\n    }    \n  } // fim for\n\n  if (sorte) {\n    for (var i = 0; i <sortedice; i++) {      \n      roll3d = new Roll('1d6').roll();    \n      game.dice3d.showForRoll(roll3d);      \n      roll = roll3d.total;\n      rolagenssorte.push(roll);\n      \n      if(roll==6){\n        sucessossorte+=1;\n        if(roll==6){\n          sortedice+=1;          \n        }\n      }    \n    } // fim for\n  }\n\n  message += `<table>\n<tbody>\n<tr>\n<td><img style=\"vertical-align:middle\" src=${chatImagem} width=\"32\" height=\"32\"></td>\n<td><h2 style=\"color:Red\">Terra Devastada</h2></td>\n</tr>\n</tbody>\n</table>`;  \n  message+=`<p>Você rolou ${dice} dado(s), e teve <b style=\"color:Blue\">${explosoes}</b> explosões.</p>`;\n  \n  message+=`<h3>Rolagens</h3>`;\n  message+=`<p>Você teve <b style=\"color:Red\">${sucessos}</b> sucesso(s).</p>`;  \n  message+=`<p style=\"background-color: lightgray; text-align: center;\"><b>${rolagens.join()}</b></p>`;\n  \n  if (sorte) {\n    message+=`<h3>Sorte</h3>`;\n    message+=`<p>Sua <b style=\"color:Green\">sorte</b> foi <b style=\"color:Red\">${sucessossorte}</b> sucesso(s).</p>`;\n    message+=`<p style=\"background-color: lightgray; text-align: center;\"><b>${rolagenssorte.join()}</b></p>`;\n    message+=`<h3>Total</h3>`;\n    message+=`<p style=\"background-color: lightgray;\">Seu total de sucessos é de <b style=\"color:Red\">${sucessos+sucessossorte}</b> sucesso(s).</p>`;\n  }\n  \n  if (secreto) {\n    chatData = {\n      user: game.user._id,    \n      content: message,\n      whisper : ChatMessage.getWhisperRecipients(\"GM\")\n    };     \n  } else {\n    chatData = {\n      user: game.user._id,    \n      content: message      \n    };     \n  } \n  \n  if (som) {\n    AudioHelper.play({src: som, volume: 1.0, autoplay: true, loop: false}, true);\n  }\n  \n  ChatMessage.create(chatData, {});  \n\n})(); // fim async","author":"5zPqQnLJNovPTewo","img":"icons/svg/dice-target.svg","actorIds":[],"_id":"m21iElWFZc7ZXArx"}
{"name":"Token Reiconize","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"core":{"sourceId":"Macro.cRA2xgOGCm81mqfu"},"cf":{"id":"temp_juyy5ibvpm","path":"Mestre#/CF_SEP/Testes","color":"#fffaad"}},"scope":"global","command":"/*\nThe purpose of this macro is to trigger VTTA-Iconizer to update icons on tokens. This macro goes through\nevery actor in the game and changes the name of every item, feature, spell, etc. by adding a '~' to the end\nthen removing the '~' from the end. This does NOT update actors in a compendium.\n\nThis was developed primarily to update actors after updating a custom dictionary used by VTTA-Iconizer.\n\nA dialog will be displayed to allow you to go forward with the update or cancel. Once the update starts, a\nnew dialog will be shown with a cancel button. That cancel button is stupid and doesn't like to be clicked.\nYou'll have to click it a bunch to convince it to stop looping.\n*/\n\nlet canceled = false\nlet totalItemsProcessed = 0\nlet totalActorsProcessed = 0\n\nfunction CancelTouching() {\n    canceled = true\n}\nDialogQuery()\n\nfunction DialogResults() {\n    let dialog = new Dialog({\n        content: `<p>Processing of ${totalActorsProcessed} actors and ${totalItemsProcessed} items complete</p>`,\n        title: 'Reiconizer Done',\n        buttons: {\n            one: {\n                label: \"Done\"\n            },\n        },\n    })\n    dialog.render(true)\n}\n\nasync function DialogQuery() {\n    return new Dialog({\n        title: `Reiconizer`,\n        content: `<p>Is your world backed up? Do you wish to activate Iconizer?</p>`,\n        buttons: {\n            one: {\n                icon: `<i class=\"fas fa-check\"></i>`,\n                label: \"Continue\",\n                callback: async() => {\n                    await TouchActors()\n                    DialogResults()\n                }\n            },\n            two: {\n                icon: `<i class=\"fas fa-times\"></i>`,\n                label: \"Cancel\",\n                callback: () => {}\n            }\n        },\n        default: \"Cancel\",\n    }).render(true);\n}\n\nfunction DialogWorking() {\n    let dialog = new Dialog({\n        title: `Reiconizer Working`,\n        content: `<p>Task in progress</p>`,\n        buttons: {\n            one: {\n                icon: `<i class=\"fas fa-times\"></i>`,\n                label: \"Cancel (You might have to click me a bunch)\",\n                callback: () => {\n                    CancelTouching()\n                }\n            },\n        },\n    })\n\n    dialog.position.height = 'Auto'\n    dialog.render(true)\n    return dialog\n}\n\nasync function TouchActors() {\n    let working = DialogWorking()\n    let remaining = game.actors.entries.length\n    for (let _actor of game.actors.entries) {\n        if (!canceled) {\n            try {\n                for (let item of _actor.items.entries) {\n                    if (!canceled) {\n                        working.data.content = `<p>Processing: ${_actor.name}</p><p>Remaining: ${remaining}</p><p>Item: ${item.name}</p>`\n                        working.render(true)\n                        let update = {\n                            _id: item._id,\n                            name: item.name + '~'\n                        }\n                        await _actor.updateEmbeddedEntity('OwnedItem', update)\n                        update.name = update.name.slice(0, -1)\n                        await _actor.updateEmbeddedEntity('OwnedItem', update)\n                        totalItemsProcessed++\n                    }\n                }\n            } catch (err) {\n                console.log(`Error processing ${_actor.name}, ERROR: ${err}`)\n            }\n            remaining--\n            totalActorsProcessed++\n        }\n    }\n\n    working.close()\n}","author":"5zPqQnLJNovPTewo","img":"icons/svg/dice-target.svg","actorIds":[],"_id":"AQGHJM35d5Qhg3eO"}
{"name":"#[CF_tempEntity]","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"chat","flags":{"cf":{"id":"temp_juyy5ibvpm","path":"Mestre#/CF_SEP/Testes","color":"#fffaad","name":"Testes","children":["DmUfABEEd7IXx0BO","Xk4DoPiUPaaFMb2M","gGOUziVZEZgqjDs8","Kf90jOgMDMReas9D","m21iElWFZc7ZXArx","AQGHJM35d5Qhg3eO"],"folderPath":["temp_rcqwmrcok1p"]}},"scope":"global","command":"","author":"5zPqQnLJNovPTewo","img":"icons/svg/dice-target.svg","actorIds":[],"_id":"APD9m3FQfBcKbhcC"}
{"name":"Deletar Todas Templates","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"cf":{"id":"temp_rcqwmrcok1p","path":"Mestre","color":"#eeff00"}},"scope":"global","command":"/**\n * Deletes all templates on the current scene\n */\n \n// no dialog. Just delete all templates.\ncanvas.templates.deleteMany(canvas.templates.placeables.map(o =>o.id),{});\n\n// Get a dialog confirmation before deleting all templates on the scene:\n// canvas.templates.deleteAll()","author":"5zPqQnLJNovPTewo","img":"icons/svg/thrust.svg","actorIds":[],"_id":"KLCqIIqM4ETV6fSK"}
{"name":"Fechar Portas","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"furnace":{"runAsGM":false},"cf":{"id":"temp_rcqwmrcok1p","path":"Mestre","color":"#eeff00"}},"scope":"global","command":"/**\n * Closes all doors on the canvas\n * Author: @Atropos#3814\n */\n \ncanvas.walls.updateMany(canvas.scene.data.walls.map(w => {\n  return {_id: w._id, ds: w.ds === 1 ? 0 : w.ds};\n}));","author":"5zPqQnLJNovPTewo","img":"icons/svg/door-steel.svg","actorIds":[],"_id":"r30Ky2p7XPDu3V4j"}
{"name":"Iniciativa Geral","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"furnace":{"runAsGM":false},"cf":{"id":"temp_rcqwmrcok1p","path":"Mestre","color":"#eeff00"}},"scope":"global","command":"/* All tokens to Combat v1.3\n* - This macro select all tokens in the scene\n* - Add all of them to the combat tracker\n* - Roll Initiave for all\n* modified from @atnoslen with a little help from @Atropos (thanks!) \n* source: https://raw.githubusercontent.com/brunocalado/mestre-digital/master/Foundry%20VTT/Macros/Qualquer/Tokens%20da%20Cena%20no%20Combate.js\n* icon: https://raw.githubusercontent.com/brunocalado/mestre-digital/master/Foundry%20VTT/Macros/Qualquer/Tokens%20da%20Cena%20no%20Combate.svg\n*/\n\ngetRequirements();\n\nfunction getRequirements() {\n  const scene = game.scenes.entities.filter(scene => scene.active === true)[0];\n  let tokens_list = [];\n  scene.data.tokens.forEach(function(token) {\n    tokens_list += `<li>${token.name}</li>`;\n  });\n    \n  let template = `\n  <h2>Tokens</h2>\n  <ul>\n    ${tokens_list}\n  </ul>    \n  <h2>Opções</h2>\n  <table style=\"width:100%\">\n  <tr>\n    <td><input type=\"radio\" id=\"rollall\" name=\"rolltype\" value=\"rollall\"><label for=\"rollall\">Rolar para Todos?</label></td>\n    <td><input type=\"radio\" id=\"rollnpc\" name=\"rolltype\" value=\"rollnpc\" checked=\"checked><label for=\"rollnpc\">Rolar apenas para NPC?</label></td>    \n  </tr>\n  </table>  \n  <p>\n  <input type=\"checkbox\" id=\"startcombat\" checked/>Iniciar Combate?\n  </p>\n  `;\n  new Dialog({\n    title: \"Todo Mundo para o Combate\",\n    content: template,\n    buttons: {\n      ok: {\n        label: \"Manda Pau!\",\n        callback: async (html) => {\n          rollForIt(html);\n        },\n      }\n    },\n  }).render(true);\n}\n\nfunction rollForIt(html) {\n  const dice=html.find('input[name=\"rolltype\"]:checked').val();\n  let flagstartcombat=html.find(\"#startcombat\")[0].checked;\n  \n  const scene = game.scenes.entities.filter(scene => scene.active === true)[0];\n  let tokens = [];\n\n  let startCRoll=function rollAndStart() {\n    if(dice=='rollall') {\n      game.combat.rollAll();\n    } else {\n      game.combat.rollNPC();\n    }      \n    if (flagstartcombat) {\n      game.combat.startCombat();\n    }\n  }\n\n  if (!game.combat){\n    scene.data.tokens.forEach(function(token) {\n      tokens.push({tokenId:token._id});\n    });\n\n    Combat.create({scene:scene.data._id, combatants:tokens}).then(startCRoll);\n\n  } else {\n    // Combat already exists, add the missing tokens.\n    // This assumes createCombatant is expensive, so create an array\n    // instead of calling individually.\n    scene.data.tokens.forEach(function(token) {\n      if (game.combat.combatants.filter(combatant => combatant.tokenId === token._id).length === 0) {\n        tokens.push({tokenId:token._id});\n      }\n    });\n\n    game.combat.createCombatant(tokens).then(startCRoll);\n  }\n}","author":"5zPqQnLJNovPTewo","img":"icons/svg/combat.svg","actorIds":[],"_id":"TH42e1AIAmTjPoM4"}
{"name":"Mensagem Privada","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"furnace":{"runAsGM":false},"cf":{"id":"temp_rcqwmrcok1p","path":"Mestre","color":"#eeff00"}},"scope":"global","command":"const version = 'v0.2';\n/* Whisper \nFeatures\n- whisper to conected players\n\nsource: https://raw.githubusercontent.com/brunocalado/mestre-digital/master/Foundry%20VTT/Macros/Qualquer/Whisper.js\nicon: icons/tools/scribal/ink-quill-pink.webp\n*/\n\nlet users = User.collection.entities.filter(it => it.active === true);\n\nif (users.length < 2) {\n  ui.notifications.error(\"Nenhum jogador online.\");\n} else {\n  let applyChanges = false;\n  let content =`\n    <form>\n      <div class=\"form-group\">\n        <label>Selecione o jogador:</label>\n        <select id=\"player\" name=\"player\">\n  `;\n\n  for (let user of users) {  \n    content += `<option value=\"`+ user.data.name +`\">`+ user.data.name +\"</option>\";    \n  }\n\n  content += `\n        </select>\n      </div>\n        <div class=\"form-group\">\n        <label>Mensagem:</label>\n        <textarea name=\"msg\" style=\"width:250px;height:150px;\"></textarea><br>\n      </div>\n    </form>\n  `;\n\n  new Dialog(\n    {\n      title: `Mensagem Privada - ${version}`,\n      content: content,\n      buttons: {\n        yes: {\n          icon: \"<i class='fas fa-check'></i>\",\n          label: `Enviar`,\n          callback: () => applyChanges = true\n        },\n        no: {\n          icon: \"<i class='fas fa-times'></i>\",\n          label: `Cancelar`\n        },\n      },\n      default: \"yes\",\n      close: html => {\n        if (applyChanges) {\n          let player = html.find('[name=\"player\"]')[0].value;\n          let msg = html.find('[name=\"msg\"]')[0].value || \"none\";\n          if (msg !== \"none\") {\n            ChatMessage.create({\n              whisper: ChatMessage.getWhisperRecipients(player),\n              content: msg\n            })\n          }\n        }\n      }\n    }\n  ).render(true);\n  \n} // end","author":"5zPqQnLJNovPTewo","img":"icons/tools/instruments/megaphone.webp","actorIds":[],"_id":"fnSSJpkmcekPz6Fd"}
{"name":"Mostrar Lista de Atributos","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"furnace":{"runAsGM":false},"combat-utility-belt":{"macroTrigger":""},"cf":{"id":"temp_rcqwmrcok1p","path":"Mestre","color":"#eeff00"}},"scope":"global","command":"ShowActorAttributeData(actor);","author":"5zPqQnLJNovPTewo","img":"moulinette/images/gameicons/dodging.svg","actorIds":[],"_id":"1tSbTPo4jfx2frzB"}
{"name":"Prisma Luminoso","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"cf":{"id":"temp_rcqwmrcok1p","path":"Mestre","color":"#eeff00"}},"scope":"global","command":"let torch = async function() {\n\n   const tokens = canvas.tokens.controlled;\n\n   for (const token of tokens){\n       if (token.data.brightLight != 0) {\n           await token.update({\"dimLight\": 0, \"brightLight\": 0, \"lightColor\": \"\",}); \n       } else {\n         await token.update({\"dimLight\": 60, \"brightLight\": 30, \"lightAlpha\" : 0.2,  \"lightColor\": \"#000000\", lightAnimation: {speed : 2, intensity : 1, type : \"pulse\"}});\n       }\n   }\n};\ntorch();","author":"5zPqQnLJNovPTewo","img":"moulinette/images/gameicons/crystal-growth-%231aa7ff-%23ffffff.svg","actorIds":[],"_id":"nY1cIo6yeqBA0j0p"}
{"name":"Próximo Turno","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"core":{"sourceId":"Macro.EPdQjOlpTWwBKx9e"},"cf":{"id":"temp_rcqwmrcok1p","path":"Mestre","color":"#eeff00"}},"scope":"global","command":"/*\nAuthor: willisrocks\nDescription: \n\nEnds the current actors turn in a combat encounter. Useful when you don't pop out your combat tracker\nand want to end the turn from your hotbar.\n\nIf the user is a gamemaster, it will always end the current turn. For players, it will only end \nthe turn when the current actor in the turn order is owned by you. \n\nBased on the work of reddit user serrag97: https://www.reddit.com/r/FoundryVTT/comments/j1b8gs/next_turn_shortcut/\n*/\n\n\nmain()\n\nasync function main() {\n    try {\n        // If you have the Gamemaster role, you can advance\n        // the turn for any actor\n        const isGM = game.users.get(game.userId).hasRole(4);\n        if (isGM) {\n            game.combats.active.nextTurn();\n            return;\n        }\n\n        // Otherwise, we check that the user owns the current token\n        // in the turn order\n        const currTokenId = game.combats.active.current.tokenId;\n        const combatant = game.combats.active.data.combatants.find(c => c.tokenId === currTokenId);\n        const player = combatant.players.find(p => p._id === game.userId);\n        if (player) {\n            game.combats.active.nextTurn();\n            return;\n        } else {\n            ui.notifications.info('You can only advance the turn on your turn');\n        }\n    } catch(e) {\n        ui.notifications.error(e);\n        return;\n    }\n}","author":"5zPqQnLJNovPTewo","img":"icons/svg/daze.svg","actorIds":[],"_id":"bmPe5x0OT9yQunTe"}
{"name":"Stealth Check (Furtividade)","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"cf":{"id":"temp_rcqwmrcok1p","path":"Mestre","color":"#eeff00"}},"scope":"global","command":"// Grabs selected tokens and rolls a stealth check against all other tokens passive perception on the map. Then returns the result.\n// Selecionar a pessoa que quer ser furtiva e a macro mostrará quem passou na percepção passiva.\n\n// getting all actors of selected tokens\nlet actors = canvas.tokens.controlled.map(({ actor }) => actor);\n\n// if there are no selected tokens, roll for the player's character.\nif (actors.length < 1) {\n  actors = game.users.entities.map(entity => {\n    if (entity.active && entity.character !== null) {\n      return entity.character;\n    }\n  });\n}\nconst validActors = actors.filter(actor => actor != null);\n\nlet messageContent = 'pp = passive perception<br>';\n\n// roll for every actor\nfor (const selectedActor of validActors) {\n  const stealthMod = selectedActor.data.data.skills.ste.total; // stealth roll\n  const stealth = new Roll(`1d20+${stealthMod}`).roll().total; // rolling the formula\n  messageContent += `<hr><h3>${selectedActor.name} stealth roll was a <b>${stealth}</b>.</h3>`; // creating the output string\n\n  // grab a list of unique tokens then check their passive perception against the rolled stealth.\n  const uniqueActor = {};\n  const caughtBy = canvas.tokens.placeables\n    .filter(token => !!token.actor)\n    .filter(({ actor }) => { // filter out duplicate token names. ie: we assume all goblins have the same passive perception\n      if (uniqueActor[actor.name]) {\n        return false;\n      }\n      uniqueActor[actor.name] = true;\n      return true;\n    })\n    .filter(({ actor }) => {\n      return selectedActor.id !== actor.id; // Don't check to see if the token sees himself.\n    })\n    .filter(({ actor }) => actor.data.data.skills.prc.passive >= stealth); // check map tokens passives with roller stealth\n\n  if (!caughtBy.length) {\n    messageContent += 'Stealth successful!<br>';\n  } else {\n    messageContent += 'Stealth questionable:<br>';\n    caughtBy.map(({ actor }) => {\n      messageContent += `<b>${actor.name}</b> pp(${actor.data.data.skills.prc.passive}).<br>`;\n    });\n  }\n}\n\n// create the message\nconst chatData = {\n  user: game.user._id,\n  speaker: game.user,\n  content: messageContent,\n  whisper: game.users.entities.filter((u) => u.isGM).map((u) => u._id),\n};\nChatMessage.create(chatData, {});","author":"5zPqQnLJNovPTewo","img":"icons/svg/deaf.svg","actorIds":[],"_id":"DAzEymmgoWlG0LEI"}
{"name":"Tocha","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"furnace":{"runAsGM":true},"combat-utility-belt":{"macroTrigger":""},"cf":{"id":"temp_rcqwmrcok1p","path":"Mestre","color":"#eeff00"}},"scope":"global","command":"let torch = async function() {\n\n   const tokens = canvas.tokens.controlled;\n\n   for (const token of tokens){\n       if (token.data.brightLight != 0) {\n           await token.update({\"dimLight\": 0, \"brightLight\": 0, \"lightColor\": \"\",}); \n       } else {\n         await token.update({\"dimLight\": 40, \"brightLight\": 20, \"lightAlpha\" : 0.2,  \"lightColor\": \"#332d00\", lightAnimation: {speed : 1, intensity : 4, type : \"torch\"}});\n       }\n   }\n};\ntorch();","author":"5zPqQnLJNovPTewo","img":"icons/tocha.jpg","actorIds":[],"_id":"vNe06wb02wJp4w1T"}
{"name":"Visão (m)","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"script","flags":{"furnace":{"runAsGM":false},"cf":{"id":"temp_rcqwmrcok1p","path":"Mestre","color":"#eeff00"}},"scope":"global","command":"let applyChanges = false;\nnew Dialog({\n  title: `Configura Visão do Token`,\n  content: `\n    <form>\n      <div class=\"form-group\">\n        <label>Tipo de Visão:</label>\n        <select id=\"vision-type\" name=\"vision-type\">\n          <option value=\"nochange\">Sem mudança</option>\n          <option value=\"dim0\">Própria</option>\n          <option value=\"dim9\">Visão de Penumbra (9m)</option>\n          <option value=\"dim18\">Visão de Penumbra (18m)</option>\n          <option value=\"dim27\">Visão de Penumbra (27m)</option>\n          <option value=\"bright9\">Visão no Escuro (9m)</option>\n          <option value=\"bright18\">Visão no Escuro (18m)</option>\n          <option value=\"bright27\">Visão no Escuro(27m)</option>\n          <option value=\"bright36\">Visão no Escuro (Magia)(36m)(</option>\n        </select>\n      </div>\n      <div class=\"form-group\">\n        <label>Fonte de Luz:</label>\n        <select id=\"light-source\" name=\"light-source\">\n          <option value=\"nochange\">Sem mudança</option>\n          <option value=\"none\">Nenhum</option>\n          <option value=\"candle\">Vela</option>\n          <option value=\"lamp\">Lâmpada</option>\n          <option value=\"bullseye\">Lanterna (Bullseye)</option>\n          <option value=\"hooded-dim\">Lanterna (Coberta - Difusa)</option>\n          <option value=\"hooded-bright\">Lanterna (Coberta - Brilhante)</option>\n          <option value=\"light\">Luz (Truque)</option>\n          <option value=\"torch\">Tocha</option>\n        </select>\n      </div>\n    </form>\n    `,\n  buttons: {\n    yes: {\n      icon: \"<i class='fas fa-check'></i>\",\n      label: `Apply Changes`,\n      callback: () => applyChanges = true\n    },\n    no: {\n      icon: \"<i class='fas fa-times'></i>\",\n      label: `Cancel Changes`\n    },\n  },\n  default: \"yes\",\n  close: html => {\n    if (applyChanges) {\n      for ( let token of canvas.tokens.controlled ) {\n        let visionType = html.find('[name=\"vision-type\"]')[0].value || \"none\";\n        let lightSource = html.find('[name=\"light-source\"]')[0].value || \"none\";\n        let dimSight = 0;\n        let brightSight = 0;\n        let dimLight = 0;\n        let brightLight = 0;\n        let lightAngle = 360;\n        let lockRotation = token.data.lockRotation;\n        // Get Vision Type Values\n        switch (visionType) {\n          case \"dim0\":\n            dimSight = 0;\n            brightSight = 0;\n            break;\n          case \"dim9\":\n            dimSight = 9;\n            brightSight = 0;\n            break;\n          case \"dim18\":\n            dimSight = 18;\n            brightSight = 0;\n            break;\n          case \"dim27\":\n            dimSight = 27;\n            brightSight = 0;\n            break;\n          case \"bright9\":\n            dimSight = 0;\n            brightSight = 9;\n            break;\n          case \"bright18\":\n            dimSight = 0;\n            brightSight = 18;\n            break;\n          case \"bright27\":\n            dimSight = 0;\n            brightSight = 27;\n            break;\n          case \"bright36\":\n            dimSight = 0;\n            brightSight= 36;\n            break;\n          case \"nochange\":\n          default:\n            dimSight = token.data.dimSight;\n            brightSight = token.data.brightSight;\n        }\n        // Get Light Source Values\n        switch (lightSource) {\n          case \"none\":\n            dimLight = 0;\n            brightLight = 0;\n            break;\n          case \"candle\":\n            dimLight = 2;\n            brightLight = 1.5;\n            break;\n          case \"lamp\":\n            dimLight = 13;\n            brightLight = 5;\n            break;\n          case \"bullseye\":\n            dimLight = 36;\n            brightLight = 18;\n            lockRotation = false;\n            lightAngle = 52.5;\n            break;\n          case \"hooded-dim\":\n            dimLight = 1.5;\n            brightLight = 0;\n            break;\n          case \"hooded-bright\":\n            dimLight = 18;\n            brightLight = 9;\n            break;\n          case \"light\":\n            dimLight = 12;\n            brightLight = 6;\n            break;\n          case \"torch\":\n            dimLight = 12;\n            brightLight = 6;\n            break;\n          case \"nochange\":\n          default:\n            dimLight = token.data.dimLight;\n            brightLight = token.data.brightLight;\n            lightAngle = token.data.lightAngle;\n            lockRotation = token.data.lockRotation;\n        }\n        // Update Token\n        console.log(token);\n        token.update({\n          vision: true,\n          dimSight: dimSight,\n          brightSight: brightSight,\n          dimLight: dimLight,\n          brightLight:  brightLight,\n          lightAngle: lightAngle,\n          lockRotation: lockRotation\n        });\n      }\n    }\n  }\n}).render(true);","author":"5zPqQnLJNovPTewo","img":"icons/svg/eye.svg","actorIds":[],"_id":"duVQM1uWYvgWyg11"}
{"name":"#[CF_tempEntity]","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"chat","flags":{"cf":{"id":"temp_rcqwmrcok1p","path":"Mestre","color":"#eeff00","name":"Mestre","children":["KLCqIIqM4ETV6fSK","r30Ky2p7XPDu3V4j","TH42e1AIAmTjPoM4","fnSSJpkmcekPz6Fd","1tSbTPo4jfx2frzB","nY1cIo6yeqBA0j0p","bmPe5x0OT9yQunTe","DAzEymmgoWlG0LEI","vNe06wb02wJp4w1T","duVQM1uWYvgWyg11"],"folderPath":[]}},"scope":"global","command":"","author":"5zPqQnLJNovPTewo","img":"icons/svg/dice-target.svg","actorIds":[],"_id":"A89fwBM7UeFUSMs3"}
{"_id":"A89fwBM7UeFUSMs3","name":"#[CF_tempEntity]","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"chat","flags":{"cf":{"id":"temp_rcqwmrcok1p","path":"Mestre","color":"#eeff00","name":"Mestre","children":["KLCqIIqM4ETV6fSK","r30Ky2p7XPDu3V4j","TH42e1AIAmTjPoM4","fnSSJpkmcekPz6Fd","1tSbTPo4jfx2frzB","nY1cIo6yeqBA0j0p","bmPe5x0OT9yQunTe","DAzEymmgoWlG0LEI","vNe06wb02wJp4w1T","duVQM1uWYvgWyg11"],"folderPath":[],"icon":"","fontColor":"#9d4343"}},"scope":"global","command":"","author":"5zPqQnLJNovPTewo","img":"icons/svg/dice-target.svg","actorIds":[]}
{"_id":"A89fwBM7UeFUSMs3","name":"#[CF_tempEntity]","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"chat","flags":{"cf":{"id":"temp_rcqwmrcok1p","path":"Mestre","color":"#eeff00","name":"Mestre","children":["KLCqIIqM4ETV6fSK","r30Ky2p7XPDu3V4j","TH42e1AIAmTjPoM4","fnSSJpkmcekPz6Fd","1tSbTPo4jfx2frzB","nY1cIo6yeqBA0j0p","bmPe5x0OT9yQunTe","DAzEymmgoWlG0LEI","vNe06wb02wJp4w1T","duVQM1uWYvgWyg11"],"folderPath":[],"icon":"","fontColor":"#000000"}},"scope":"global","command":"","author":"5zPqQnLJNovPTewo","img":"icons/svg/dice-target.svg","actorIds":[]}
{"_id":"5FpBO85Bj4lNgcg3","name":"#[CF_tempEntity]","permission":{"default":0,"5zPqQnLJNovPTewo":3},"type":"chat","flags":{"cf":{"id":"temp_4dqhvmirpc3","path":"AkiraSa","color":"#26f7e9","name":"AkiraSa","children":["naqL1BclBPomyus2","sFB4ddmh0JW95B5Z","2CMZmx9MxjQ6Sm9W","kg36tC2bgEXVqKBh","RTbibAYJq75X1r0J","Y2xZeMjDA3miAllC","UZOcylosca8kYpHZ"],"folderPath":[],"icon":"","fontColor":"#000000"}},"scope":"global","command":"","author":"5zPqQnLJNovPTewo","img":"icons/svg/dice-target.svg","actorIds":[]}
